{
  "apiVersion": "operator.victoriametrics.com/v1beta1",
  "kind": "VMRule",
  "metadata": {
    "labels": {
      "app": "victoria-metrics-k8s-stack",
      "app.kubernetes.io/instance": "victoria-metrics",
      "app.kubernetes.io/managed-by": "Helm",
      "app.kubernetes.io/name": "victoria-metrics-k8s-stack",
      "app.kubernetes.io/version": "v0.28.1",
      "helm.sh/chart": "victoria-metrics-k8s-stack-0.65.1",
      "k8s.joshcorp.co/app": "victoriametrics"
    },
    "name": "victoria-metrics-victoria-metrics-k8s-stack-kube-apiserver-histogram.rules",
    "namespace": "victoria-metrics"
  },
  "spec": {
    "groups": [
      {
        "name": "kube-apiserver-histogram.rules",
        "params": {},
        "rules": [
          {
            "annotations": {},
            "expr": "histogram_quantile(0.99, sum(rate(apiserver_request_sli_duration_seconds_bucket{job=\"apiserver\",verb=~\"LIST|GET\",subresource!~\"proxy|attach|log|exec|portforward\"}[5m])) by(cluster,le,resource)) \u003e 0",
            "labels": {
              "quantile": "0.99",
              "verb": "read"
            },
            "record": "cluster_quantile:apiserver_request_sli_duration_seconds:histogram_quantile"
          },
          {
            "annotations": {},
            "expr": "histogram_quantile(0.99, sum(rate(apiserver_request_sli_duration_seconds_bucket{job=\"apiserver\",verb=~\"POST|PUT|PATCH|DELETE\",subresource!~\"proxy|attach|log|exec|portforward\"}[5m])) by(cluster,le,resource)) \u003e 0",
            "labels": {
              "quantile": "0.99",
              "verb": "write"
            },
            "record": "cluster_quantile:apiserver_request_sli_duration_seconds:histogram_quantile"
          }
        ]
      }
    ]
  }
}
